{% extends "base_generic.html" %}
{% load widget_tweaks %}

{% block navbar %}
  {% include "includeable/empty_navbar.html" %}
{% endblock %}

{% block content %}
<div class="container">
  <div class="row justify-content-center pt-2">
  {% include "includeable/message_displayer.html" %}
  </div><!-- row -->
  <div class="row">
    <div class="col-sm-12">
      <h4></h4>

    </div><!-- col -->
    <div class="col-sm-12">

{% if page is None %}
  {% if si.completed %}
  <div class="row justify-content-center">
    <div class="col-sm-8">
      <div class="card text-center">
        <div class="card-header">
          {{ si.survey.product.name }}
        </div>
        <div class="card-body">
          <h5 class="card-title">Thank you for taking the time to answer this survey</h5>
          <p class="card-text">
            The survey has been successfully completed, and your answers saved. You can update your answers until {{ si.survey.date_close }} by using the button below, and the link we emailed you before will get you back here if you need it.
          </p>
          <p class="card-text">
            You may close this window now.
          </p>
          <a href="{% url 'surveys-answer-survey-pages' si.get_url_token 1 %}" class="btn btn-info">Review answers</a>
        </div>
      </div>
    </div>
  </div>
  {% else %}
  <div class="row justify-content-center">
    <div class="col-sm-8">
      <div class="card text-center">
        <div class="card-header">
          {{ si.survey.product.name }}
        </div>
        <div class="card-body">
          <h5 class="card-title">Thank you for taking the time to answer this survey</h5>
          <p class="card-text">{{ si.survey.product.short_description }}</p>
          <a href="{% url 'surveys-answer-survey-pages' si.get_url_token 1 %}" class="btn btn-info">Start survey</a>
        </div>
      </div>
    </div>
  </div>
  {% endif %}

{% else %}

      <form method="post">
        {% csrf_token %}
        {% for hidden_field in form.hidden_fields %}
          {{ hidden_field }}
        {% endfor %}
{% for field in form.visible_fields %}

<div class="card mb-4
{% if form.is_bound %}
  {% if field.errors %}
border-danger
  {% else %}
border-success
  {% endif %}
{% endif %}
">
  <div class="card-header text-muted">
    {% if field.help_text %}
      <span class="form-text text-muted">{{ field.help_text }}</span>
    {% endif %}
  </div> <!-- card header -->
  <div class="card-body">
  <h4>{{ field.label_tag }}</h4>

  {% for radio in field %}
  <div class="form-check form-check-inline">
    {{ radio.tag }}
    <label class="form-check-label" for="{{ radio.id_for_label }}">{{ radio.choice_label }}</label>
  </div>
  {% endfor %}

  {% if form.is_bound %}
    {% if field.errors %}
      {% for error in field.errors %}
        <div class="invalid-feedback">
          {{ error }}
        </div>
      {% endfor %}
    {% endif %}
  {% endif %}

    </div> <!-- card body -->
</div> <!-- card -->








{% endfor %}

<button type="submit" class="btn btn-info">{% if submit_button_text %} {{ submit_button_text }} {% else %} Submit {% endif %} </button>
</form>

    </div> <!-- col -->
  </div> <!-- row -->
</div><!-- container -->

{% endif %}


{% endblock %}
